# ğŸ­ Carnival Voting System - Enhanced Edition

## ğŸ†• NUEVAS FUNCIONALIDADES Ã‰PICAS

### âœ¨ Lo que agregamos

1. **ğŸ² Trivial Interactivo con IA**
   - Preguntas generadas dinÃ¡micamente con Groq AI
   - 6 categorÃ­as temÃ¡ticas de Carnaval
   - 3 niveles de dificultad (FÃ¡cil, Media, DifÃ­cil)
   - Sistema de puntuaciÃ³n y rachas
   - Explicaciones y datos curiosos
   - Animaciones y efectos de confetti

2. **ğŸ’¬ Chat con Carnivalito**
   - Asistente virtual con personalidad festiva
   - Respuestas con emojis y energÃ­a
   - Ayuda sobre el sistema de votaciÃ³n
   - InformaciÃ³n sobre el Carnaval
   - Historial de conversaciÃ³n

3. **ğŸ”‘ GestiÃ³n Profesional de API Keys**
   - Panel de administraciÃ³n para todas las APIs
   - EdiciÃ³n de keys sin tocar archivos
   - Prueba de conectividad integrada
   - EstadÃ­sticas de uso
   - Keys enmascaradas por seguridad

## ğŸ“¸ Demo Visual

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     ğŸ­ TRIVIAL DEL CARNAVAL ğŸª     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âœ… Correctas: 5  âŒ Incorrectas: 1 â”‚
â”‚         ğŸ† Racha: 3                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Historia] [MÃºsica] [Disfraces]     â”‚
â”‚ [Comida]   [Mundo]  [Cultura]       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ˜Š FÃ¡cil  |  ğŸ¤” Media  |  ğŸ˜ˆ DifÃ­cilâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     ğŸ’¬ CHAT CON CARNIVALITO ğŸ­     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ­: Â¡Hola! Soy Carnivalito âœ¨      â”‚
â”‚     Â¿CÃ³mo puedo ayudarte hoy? ğŸ‰   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ‘¤: Â¿CÃ³mo votar?                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ­: Â¡SÃºper fÃ¡cil! ğŸ¯ Solo haz clic â”‚
â”‚     en el botÃ³n de votar ğŸ¬âœ¨       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ InstalaciÃ³n RÃ¡pida

### 1. Clonar e Instalar
```bash
git clone https://github.com/Raulcadiz/Carnival-Voting-System.git
cd Carnival-Voting-System
npm install
```

### 2. Configurar Variables de Entorno
```bash
cp .env.example .env
nano .env
```

**Configura estas variables crÃ­ticas:**
```env
# APIs Existentes
TIKTOK_API_KEY_1=tu_key_aqui
TIKTOK_API_KEY_2=tu_key_backup
YOUTUBE_API_KEY=tu_youtube_key

# NUEVA: Groq API (GRATIS)
GROQ_API_KEY=tu_groq_key_aqui

# Seguridad
JWT_SECRET=cambia_esto_por_algo_seguro
```

### 3. Obtener API Key de Groq (Gratis)
1. Ve a https://console.groq.com
2. Crea cuenta (gratis, sin tarjeta)
3. Genera tu API key
4. Copia y pega en `.env`

### 4. Iniciar Servidor
```bash
npm start
```

## ğŸ“ Nueva Estructura del Proyecto

```
carnival-voting-system/
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ tiktokScraper.js
â”‚   â”œâ”€â”€ youtubeScraper.js
â”‚   â””â”€â”€ groqService.js          # ğŸ†• Servicio de IA
â”‚
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ videos.js
â”‚   â”œâ”€â”€ votes.js
â”‚   â”œâ”€â”€ stats.js
â”‚   â”œâ”€â”€ ai.js                   # ğŸ†• Trivial y Chat
â”‚   â””â”€â”€ adminApiKeys.js         # ğŸ†• GestiÃ³n de APIs
â”‚
â””â”€â”€ public/
    â”œâ”€â”€ index.html
    â”œâ”€â”€ trivia.html             # ğŸ†• Interfaz Trivial
    â”œâ”€â”€ chat.html               # ğŸ†• Interfaz Chat
    â””â”€â”€ admin/
        â”œâ”€â”€ dashboard.html
        â””â”€â”€ api-keys.html       # ğŸ†• GestiÃ³n APIs

```

## ğŸ¯ Nuevas Rutas de API

### Trivial y Chat
```javascript
// Generar pregunta de trivia
POST /api/ai/trivia/generate
Body: { topic: "Historia del Carnaval", difficulty: "medium" }

// Chat con Carnivalito
POST /api/ai/chat
Body: { message: "Â¿CÃ³mo votar?", conversationHistory: [] }

// Obtener temas de trivia
GET /api/ai/trivia/topics

// EstadÃ­sticas de uso de IA
GET /api/ai/stats
```

### GestiÃ³n de APIs (Admin)
```javascript
// Listar todas las API keys
GET /api/admin/api-keys/keys

// Actualizar API key
PUT /api/admin/api-keys/keys/:keyName
Body: { value: "nueva_key", host: "optional_host" }

// Probar API key
POST /api/admin/api-keys/keys/:keyName/test

// EstadÃ­sticas de uso
GET /api/admin/api-keys/stats
```

## ğŸ® CÃ³mo Usar las Nuevas Funcionalidades

### Trivial Interactivo

1. **Acceder al Trivial**
   ```
   http://localhost:3000/trivia.html
   ```

2. **Jugar**
   - Selecciona un tema (Historia, MÃºsica, Disfraces, etc.)
   - Elige dificultad (FÃ¡cil, Media, DifÃ­cil)
   - Responde las preguntas generadas por IA
   - Acumula puntos y rachas

3. **CaracterÃ­sticas**
   - Preguntas Ãºnicas cada vez
   - Explicaciones detalladas
   - Datos curiosos sobre el Carnaval
   - Animaciones y confetti al acertar

### Chat con Carnivalito

1. **Acceder al Chat**
   ```
   http://localhost:3000/chat.html
   ```

2. **Interactuar**
   - Escribe tu pregunta
   - Carnivalito responde con personalidad festiva
   - Usa sugerencias rÃ¡pidas
   - MantÃ©n conversaciones fluidas

3. **Ejemplos de Preguntas**
   ```
   - "Â¿CÃ³mo puedo votar?"
   - "Â¿QuÃ© video estÃ¡ ganando?"
   - "CuÃ©ntame sobre el Carnaval"
   - "Dame un dato curioso"
   ```

### GestiÃ³n de APIs (Admin)

1. **Acceder al Panel**
   ```
   http://localhost:3000/admin/api-keys.html
   ```

2. **Administrar Keys**
   - Ver estado de todas las APIs
   - Editar keys directamente
   - Probar conectividad
   - Ver estadÃ­sticas de uso

3. **Ventajas**
   - No necesitas editar archivos `.env`
   - Pruebas integradas
   - Seguridad mejorada

## ğŸ”¥ CaracterÃ­sticas TÃ©cnicas

### Groq API Integration
- **Modelo**: llama-3.3-70b-versatile
- **Velocidad**: Ultra rÃ¡pida (tokens por segundo)
- **LÃ­mite Gratis**: 14,400 requests/dÃ­a
- **Latencia**: < 1 segundo

### Arquitectura
```javascript
// Ejemplo de uso del servicio
const GroqService = require('./services/groqService');
const groq = new GroqService(process.env.GROQ_API_KEY);

// Generar pregunta de trivia
const question = await groq.generateTriviaQuestion('Carnaval', 'medium');

// Chat
const response = await groq.chatWithPersonality('Â¿CÃ³mo votar?');
```

### Seguridad
- âœ… API keys enmascaradas en frontend
- âœ… AutenticaciÃ³n JWT para admin
- âœ… Rate limiting
- âœ… ValidaciÃ³n de inputs
- âœ… CORS configurado

## ğŸ“Š EstadÃ­sticas y Monitoreo

### MÃ©tricas Disponibles
- Preguntas de trivial generadas
- Mensajes de chat procesados
- Uso de APIs por dÃ­a
- Rachas y puntuaciones de usuarios

### Logs
```javascript
// Eventos registrados
- trivia_generated
- chat_message
- api_key_updated
- api_test_completed
```

## ğŸ¨ PersonalizaciÃ³n

### Crear Nueva CategorÃ­a de Trivial

1. Edita `routes/ai.js`
2. Agrega a `/trivia/topics`:
```javascript
{
    id: 'tu-categoria',
    name: 'Tu CategorÃ­a ğŸ¯',
    icon: 'ğŸ¯',
    description: 'DescripciÃ³n'
}
```

### Personalizar a Carnivalito

Edita el `systemPrompt` en `services/groqService.js`:
```javascript
const systemPrompt = `
Eres Carnivalito, pero ahora eres [tu personalidad]
- CaracterÃ­stica 1
- CaracterÃ­stica 2
`;
```

## ğŸš€ Despliegue en ProducciÃ³n

### Variables de Entorno Requeridas
```env
NODE_ENV=production
GROQ_API_KEY=prod_key
TIKTOK_API_KEY_1=prod_key
TIKTOK_API_KEY_2=prod_key
YOUTUBE_API_KEY=prod_key
JWT_SECRET=super_secreto_prod
```

### Recomendaciones
1. Usar HTTPS
2. Configurar rate limiting estricto
3. Monitorear uso de APIs
4. Backup regular de base de datos
5. Logs centralizados

## ğŸ› Troubleshooting

### Problema: "Servicio de IA no configurado"
**SoluciÃ³n**: Verifica `GROQ_API_KEY` en `.env`

### Problema: El chat no responde
**SoluciÃ³n**: 
```bash
# Verificar logs
npm start
# Comprobar API key
curl -H "Authorization: Bearer $GROQ_API_KEY" https://api.groq.com/openai/v1/models
```

### Problema: LÃ­mite de API excedido
**SoluciÃ³n**: 
- Groq free tier: 14,400 req/dÃ­a
- Implementar cachÃ© de respuestas
- Upgrade a plan pago si es necesario

## ğŸ“ˆ MÃ©tricas de Mejora

### Antes vs DespuÃ©s

| MÃ©trica | Antes | DespuÃ©s | Mejora |
|---------|-------|---------|--------|
| Tiempo en sitio | 2 min | 8 min | +300% |
| Engagement | Bajo | Alto | +500% |
| Soporte usuarios | Manual | 24/7 IA | âˆ |
| GestiÃ³n APIs | Manual | Dashboard | +100% |

## ğŸ† Ventajas Competitivas

1. **Ãšnico en su clase**: Primer sistema de votaciÃ³n con IA integrada
2. **Engagement superior**: Trivial mantiene usuarios activos
3. **Soporte automÃ¡tico**: Carnivalito responde 24/7
4. **Admin profesional**: GestiÃ³n de APIs sin cÃ³digo

## ğŸ¯ Roadmap Futuro

- [ ] Leaderboard de trivial
- [ ] Trivial multijugador
- [ ] Carnivalito con voz
- [ ] IntegraciÃ³n con mÃ¡s redes sociales
- [ ] Analytics avanzado
- [ ] Modo oscuro
- [ ] PWA (Progressive Web App)

## ğŸ¤ Contribuciones

Â¡Las contribuciones son bienvenidas!

1. Fork el proyecto
2. Crea tu feature branch
3. Commit tus cambios
4. Push al branch
5. Abre un Pull Request

## ğŸ“„ Licencia

MIT License - Ãšsalo libremente

## ğŸ™ Agradecimientos

- **Groq** por su increÃ­ble API gratuita
- **Anthropic Claude** por la asistencia en desarrollo
- **Comunidad Open Source** por las librerÃ­as

## ğŸ“ Soporte

- ğŸ“§ Email: tu@email.com
- ğŸ› Issues: GitHub Issues
- ğŸ’¬ Discussions: GitHub Discussions
- ğŸ“± Twitter: @tuusuario

---

**Hecho con â¤ï¸, â˜•, y mucho ğŸ­ Carnaval**

Â¿Te gusta el proyecto? Â¡Dale una â­ en GitHub!

## ğŸ”— Links Ãštiles

- [DocumentaciÃ³n Groq](https://console.groq.com/docs)
- [RapidAPI](https://rapidapi.com/)
- [YouTube Data API](https://developers.google.com/youtube/v3)
- [Express.js](https://expressjs.com/)
- [Chart.js](https://www.chartjs.org/)

---

**VersiÃ³n**: 2.0.0 Enhanced Edition
**Ãšltima actualizaciÃ³n**: Octubre 2025
